<!DOCTYPE html>
<!-- saved from url=(0061)file:///C:/Users/user/Downloads/monster-card-prototype_2.html -->
<html lang="ko"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ëª¬ìŠ¤í„° ì¹´ë“œ ì‹œìŠ¤í…œ í”„ë¡œí† íƒ€ì…</title>
<link href="./monstercard_prototype_files/css2" rel="stylesheet">
<style>
  :root {
    --bg-dark: #0a0c10;
    --bg-panel: #11151e;
    --bg-card: #161b27;
    --bg-card-hover: #1e2535;
    --border: #2a3448;
    --border-glow: #3d5a9e;
    --gold: #d4a843;
    --gold-light: #f0c870;
    --silver: #8fa8cc;
    --red: #c94040;
    --green: #3db87a;
    --blue: #4a8fd4;
    --purple: #8b5cf6;
    --cyan: #22d3ee;
    --text-primary: #e8eaf0;
    --text-secondary: #7a8ca8;
    --text-muted: #44566a;
    --pair-color: #3db87a;
    --triple-color: #d4a843;
    --straight-color: #c94040;
    --fullhouse-color: #8b5cf6;
    --twopair-color: #22d3ee;
  }

  * { margin: 0; padding: 0; box-sizing: border-box; }

  body {
    background: var(--bg-dark);
    color: var(--text-primary);
    font-family: 'Noto Sans KR', sans-serif;
    min-height: 100vh;
    overflow-x: hidden;
  }

  /* ë°°ê²½ íš¨ê³¼ */
  body::before {
    content: '';
    position: fixed;
    top: 0; left: 0; right: 0; bottom: 0;
    background: 
      radial-gradient(ellipse 60% 40% at 20% 10%, rgba(61, 90, 158, 0.08) 0%, transparent 60%),
      radial-gradient(ellipse 40% 30% at 80% 80%, rgba(139, 92, 246, 0.06) 0%, transparent 60%);
    pointer-events: none;
    z-index: 0;
  }

  .app {
    position: relative;
    z-index: 1;
    max-width: 1600px;
    margin: 0 auto;
    padding: 20px;
  }

  /* í—¤ë” */
  header {
    text-align: center;
    padding: 24px 0 20px;
    border-bottom: 1px solid var(--border);
    margin-bottom: 24px;
    position: relative;
  }

  header::after {
    content: '';
    position: absolute;
    bottom: -1px;
    left: 50%;
    transform: translateX(-50%);
    width: 200px;
    height: 1px;
    background: linear-gradient(90deg, transparent, var(--gold), transparent);
  }

  .header-title {
    font-family: 'Cinzel', serif;
    font-size: 28px;
    font-weight: 700;
    letter-spacing: 4px;
    background: linear-gradient(135deg, var(--gold-light), var(--gold), #a87c2a);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    text-shadow: none;
  }

  .header-sub {
    font-size: 11px;
    color: var(--text-muted);
    letter-spacing: 3px;
    text-transform: uppercase;
    margin-top: 4px;
  }

  /* íƒ­ ë„¤ë¹„ê²Œì´ì…˜ */
  .tabs {
    display: flex;
    gap: 4px;
    margin-bottom: 24px;
    background: var(--bg-panel);
    border: 1px solid var(--border);
    border-radius: 8px;
    padding: 4px;
  }

  .tab-btn {
    flex: 1;
    padding: 10px 16px;
    background: transparent;
    border: none;
    color: var(--text-secondary);
    font-family: 'Noto Sans KR', sans-serif;
    font-size: 13px;
    font-weight: 500;
    cursor: pointer;
    border-radius: 5px;
    transition: all 0.2s;
    letter-spacing: 0.5px;
  }

  .tab-btn:hover { color: var(--text-primary); background: var(--bg-card); }
  .tab-btn.active {
    background: var(--bg-card);
    color: var(--gold);
    border: 1px solid var(--border);
    box-shadow: 0 0 12px rgba(212, 168, 67, 0.1);
  }

  /* íŒ¨ë„ */
  .panel {
    background: var(--bg-panel);
    border: 1px solid var(--border);
    border-radius: 10px;
    overflow: hidden;
  }

  .panel-header {
    padding: 14px 20px;
    border-bottom: 1px solid var(--border);
    display: flex;
    align-items: center;
    gap: 10px;
  }

  .panel-title {
    font-size: 13px;
    font-weight: 700;
    letter-spacing: 1px;
    color: var(--gold);
    text-transform: uppercase;
  }

  .panel-body { padding: 20px; }

  /* ë ˆì´ì•„ì›ƒ ê·¸ë¦¬ë“œ */
  .main-grid {
    display: grid;
    grid-template-columns: 380px 1fr;
    gap: 20px;
  }

  .left-col { display: flex; flex-direction: column; gap: 20px; }
  .right-col { display: flex; flex-direction: column; gap: 20px; }

  /* ========================
     ì¹´ë“œ ìƒì„± í¼
     ======================== */
  .form-group { margin-bottom: 16px; }
  .form-label {
    display: block;
    font-size: 11px;
    font-weight: 700;
    color: var(--text-secondary);
    letter-spacing: 1.5px;
    text-transform: uppercase;
    margin-bottom: 6px;
  }

  .form-input, .form-select {
    width: 100%;
    padding: 9px 12px;
    background: var(--bg-dark);
    border: 1px solid var(--border);
    border-radius: 6px;
    color: var(--text-primary);
    font-family: 'Noto Sans KR', sans-serif;
    font-size: 13px;
    transition: border-color 0.2s;
    outline: none;
  }

  .form-input:focus, .form-select:focus {
    border-color: var(--border-glow);
    box-shadow: 0 0 0 2px rgba(61, 90, 158, 0.15);
  }

  .form-select option { background: var(--bg-panel); }

  .stat-row {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 10px;
  }

  /* ë“±ê¸‰ ì„ íƒ */
  .grade-selector {
    display: flex;
    gap: 6px;
  }

  .grade-btn {
    flex: 1;
    padding: 7px 4px;
    border: 1px solid var(--border);
    background: var(--bg-dark);
    color: var(--text-muted);
    border-radius: 5px;
    cursor: pointer;
    font-size: 11px;
    font-weight: 700;
    letter-spacing: 0.5px;
    text-align: center;
    transition: all 0.2s;
  }

  .grade-btn:hover { opacity: 0.8; }
  .grade-btn.active { color: #fff; }
  .grade-btn[data-grade="N"].active { background: #4a5568; border-color: #718096; }
  .grade-btn[data-grade="R"].active { background: #2563eb; border-color: #60a5fa; }
  .grade-btn[data-grade="SR"].active { background: #7c3aed; border-color: #a78bfa; }
  .grade-btn[data-grade="SSR"].active { background: #92400e; border-color: var(--gold); color: var(--gold-light); }

  /* ìƒì„± ë²„íŠ¼ */
  .btn-primary {
    width: 100%;
    padding: 12px;
    background: linear-gradient(135deg, #1a2d5a, #2a4080);
    border: 1px solid var(--border-glow);
    color: var(--gold-light);
    font-family: 'Noto Sans KR', sans-serif;
    font-size: 13px;
    font-weight: 700;
    letter-spacing: 2px;
    border-radius: 6px;
    cursor: pointer;
    text-transform: uppercase;
    transition: all 0.2s;
    position: relative;
    overflow: hidden;
  }

  .btn-primary::before {
    content: '';
    position: absolute;
    top: 0; left: -100%; width: 100%; height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.05), transparent);
    transition: left 0.4s;
  }

  .btn-primary:hover::before { left: 100%; }
  .btn-primary:hover {
    border-color: var(--gold);
    box-shadow: 0 0 20px rgba(212, 168, 67, 0.2);
    transform: translateY(-1px);
  }

  .btn-danger {
    padding: 5px 10px;
    background: rgba(201, 64, 64, 0.15);
    border: 1px solid rgba(201, 64, 64, 0.3);
    color: var(--red);
    border-radius: 4px;
    cursor: pointer;
    font-size: 11px;
    font-family: 'Noto Sans KR', sans-serif;
    transition: all 0.2s;
  }

  .btn-danger:hover { background: rgba(201, 64, 64, 0.3); }

  .btn-sm {
    padding: 5px 12px;
    background: rgba(61, 90, 158, 0.2);
    border: 1px solid var(--border);
    color: var(--silver);
    border-radius: 4px;
    cursor: pointer;
    font-size: 11px;
    font-family: 'Noto Sans KR', sans-serif;
    transition: all 0.2s;
  }
  .btn-sm:hover { background: rgba(61, 90, 158, 0.4); border-color: var(--border-glow); }

  /* ========================
     ì¹´ë“œ ì»´í¬ë„ŒíŠ¸
     ======================== */
  .card-item {
    background: var(--bg-card);
    border: 1px solid var(--border);
    border-radius: 8px;
    padding: 12px;
    display: flex;
    align-items: center;
    gap: 12px;
    cursor: pointer;
    transition: all 0.2s;
    position: relative;
    overflow: hidden;
  }

  .card-item::before {
    content: '';
    position: absolute;
    top: 0; left: 0;
    width: 3px;
    height: 100%;
    transition: opacity 0.2s;
  }

  .card-item[data-grade="N"]::before { background: #718096; }
  .card-item[data-grade="R"]::before { background: #60a5fa; }
  .card-item[data-grade="SR"]::before { background: #a78bfa; }
  .card-item[data-grade="SSR"]::before { background: var(--gold); }

  .card-item:hover { background: var(--bg-card-hover); border-color: var(--border-glow); transform: translateX(2px); }
  .card-item.selected { border-color: var(--gold); background: rgba(212, 168, 67, 0.05); }
  .card-item.equipped { border-color: var(--green); background: rgba(61, 184, 122, 0.05); }

  .card-icon {
    width: 44px;
    height: 44px;
    border-radius: 8px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 22px;
    flex-shrink: 0;
  }

  .card-info { flex: 1; min-width: 0; }

  .card-name {
    font-size: 13px;
    font-weight: 700;
    color: var(--text-primary);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }

  .card-grade-badge {
    font-size: 9px;
    font-weight: 900;
    letter-spacing: 1px;
    padding: 1px 5px;
    border-radius: 3px;
    display: inline-block;
    margin-bottom: 3px;
  }

  .grade-N .card-grade-badge { background: #4a5568; color: #a0aec0; }
  .grade-R .card-grade-badge { background: rgba(37,99,235,0.3); color: #60a5fa; border: 1px solid rgba(96,165,250,0.3); }
  .grade-SR .card-grade-badge { background: rgba(124,58,237,0.3); color: #a78bfa; border: 1px solid rgba(167,139,250,0.3); }
  .grade-SSR .card-grade-badge { background: rgba(146,64,14,0.3); color: var(--gold-light); border: 1px solid rgba(212,168,67,0.4); }

  .card-stats {
    font-size: 10px;
    color: var(--text-secondary);
    display: flex;
    flex-wrap: wrap;
    gap: 6px;
    margin-top: 2px;
  }

  .stat-badge {
    padding: 1px 6px;
    background: rgba(255,255,255,0.04);
    border-radius: 3px;
    border: 1px solid var(--border);
  }

  .stat-badge.hp { color: #e57373; }
  .stat-badge.atk { color: #ffa726; }
  .stat-badge.def { color: #64b5f6; }
  .stat-badge.spd { color: #81c784; }
  .stat-badge.crit { color: #ff8a65; }
  .stat-badge.crit_dmg { color: #ffcc02; }

  /* ========================
     ì¹´ë“œ ìŠ¬ë¡¯ (ì¥ì°©)
     ======================== */
  .slots-area { }

  .slots-grid {
    display: flex;
    gap: 12px;
    justify-content: center;
    flex-wrap: wrap;
    margin-bottom: 20px;
  }

  .slot {
    width: 130px;
    min-height: 170px;
    background: var(--bg-card);
    border: 1px dashed var(--border);
    border-radius: 10px;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.25s;
    position: relative;
    overflow: hidden;
  }

  .slot:hover:not(.filled) {
    border-color: var(--border-glow);
    background: rgba(61, 90, 158, 0.05);
    box-shadow: 0 0 15px rgba(61, 90, 158, 0.1) inset;
  }

  .slot.filled {
    border-style: solid;
    cursor: default;
  }

  .slot.filled[data-grade="N"] { border-color: #718096; }
  .slot.filled[data-grade="R"] { border-color: #60a5fa; box-shadow: 0 0 8px rgba(96,165,250,0.1) inset; }
  .slot.filled[data-grade="SR"] { border-color: #a78bfa; box-shadow: 0 0 8px rgba(167,139,250,0.1) inset; }
  .slot.filled[data-grade="SSR"] { border-color: var(--gold); box-shadow: 0 0 12px rgba(212,168,67,0.15) inset; }

  .slot-number {
    font-size: 10px;
    font-weight: 700;
    color: var(--text-muted);
    letter-spacing: 2px;
    position: absolute;
    top: 8px; left: 10px;
  }

  .slot-empty-icon { font-size: 28px; opacity: 0.15; margin-bottom: 8px; }
  .slot-empty-text { font-size: 10px; color: var(--text-muted); letter-spacing: 1px; }

  .slot-card-icon { font-size: 36px; margin-bottom: 8px; }
  .slot-card-name { font-size: 11px; font-weight: 700; color: var(--text-primary); text-align: center; padding: 0 8px; }
  .slot-card-grade { font-size: 9px; font-weight: 900; margin-bottom: 6px; }
  .slot-card-stats { font-size: 9px; color: var(--text-secondary); text-align: center; line-height: 1.6; }

  .slot-remove {
    position: absolute;
    top: 6px; right: 6px;
    width: 18px; height: 18px;
    background: rgba(201,64,64,0.2);
    border: 1px solid rgba(201,64,64,0.3);
    color: var(--red);
    border-radius: 50%;
    display: flex; align-items: center; justify-content: center;
    cursor: pointer;
    font-size: 10px;
    transition: all 0.2s;
    opacity: 0;
  }

  .slot.filled:hover .slot-remove { opacity: 1; }
  .slot-remove:hover { background: rgba(201,64,64,0.5); }

  /* ì„¸íŠ¸ íš¨ê³¼ í‘œì‹œ */
  .set-effect-area {
    background: var(--bg-dark);
    border: 1px solid var(--border);
    border-radius: 8px;
    padding: 16px;
  }

  .set-effect-title {
    font-size: 11px;
    font-weight: 700;
    letter-spacing: 2px;
    color: var(--text-muted);
    text-transform: uppercase;
    margin-bottom: 12px;
  }

  .effect-row {
    display: flex;
    align-items: flex-start;
    gap: 10px;
    padding: 10px 12px;
    border-radius: 6px;
    margin-bottom: 6px;
    border: 1px solid transparent;
  }

  .effect-row.individual { background: rgba(255,255,255,0.02); border-color: var(--border); }
  .effect-row.set-pair { background: rgba(61,184,122,0.06); border-color: rgba(61,184,122,0.2); }
  .effect-row.set-twopair { background: rgba(34,211,238,0.06); border-color: rgba(34,211,238,0.2); }
  .effect-row.set-triple { background: rgba(212,168,67,0.06); border-color: rgba(212,168,67,0.2); }
  .effect-row.set-fullhouse { background: rgba(139,92,246,0.06); border-color: rgba(139,92,246,0.2); }
  .effect-row.set-straight { background: rgba(201,64,64,0.08); border-color: rgba(201,64,64,0.25); }

  .effect-badge {
    font-size: 9px;
    font-weight: 900;
    letter-spacing: 1px;
    padding: 2px 7px;
    border-radius: 3px;
    flex-shrink: 0;
    white-space: nowrap;
  }

  .effect-badge.individual { background: rgba(255,255,255,0.08); color: var(--text-secondary); }
  .effect-badge.pair { background: rgba(61,184,122,0.2); color: var(--pair-color); border: 1px solid rgba(61,184,122,0.3); }
  .effect-badge.twopair { background: rgba(34,211,238,0.2); color: var(--twopair-color); border: 1px solid rgba(34,211,238,0.3); }
  .effect-badge.triple { background: rgba(212,168,67,0.2); color: var(--triple-color); border: 1px solid rgba(212,168,67,0.3); }
  .effect-badge.fullhouse { background: rgba(139,92,246,0.2); color: var(--fullhouse-color); border: 1px solid rgba(139,92,246,0.3); }
  .effect-badge.straight { background: rgba(201,64,64,0.2); color: var(--straight-color); border: 1px solid rgba(201,64,64,0.3); }

  .effect-content { flex: 1; }
  .effect-label { font-size: 11px; font-weight: 700; color: var(--text-primary); margin-bottom: 3px; }
  .effect-desc { font-size: 10px; color: var(--text-secondary); line-height: 1.5; }
  .effect-stats { font-size: 10px; display: flex; flex-wrap: wrap; gap: 6px; margin-top: 4px; }

  .effect-stat-chip {
    padding: 1px 7px;
    border-radius: 3px;
    font-weight: 700;
    font-size: 10px;
  }

  .effect-stat-chip.positive { background: rgba(61,184,122,0.15); color: var(--green); border: 1px solid rgba(61,184,122,0.2); }

  .total-stats {
    background: var(--bg-dark);
    border: 1px solid var(--border);
    border-radius: 8px;
    padding: 14px 16px;
    margin-top: 12px;
  }

  .total-stats-title {
    font-size: 10px;
    font-weight: 700;
    letter-spacing: 2px;
    color: var(--gold);
    text-transform: uppercase;
    margin-bottom: 10px;
  }

  .total-stats-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 8px;
  }

  .total-stat-item {
    background: rgba(255,255,255,0.02);
    border: 1px solid var(--border);
    border-radius: 6px;
    padding: 8px 10px;
    text-align: center;
  }

  .total-stat-name { font-size: 9px; color: var(--text-muted); letter-spacing: 1px; text-transform: uppercase; margin-bottom: 3px; }
  .total-stat-val { font-size: 18px; font-weight: 900; line-height: 1; }
  .total-stat-val.hp { color: #e57373; }
  .total-stat-val.atk { color: #ffa726; }
  .total-stat-val.def { color: #64b5f6; }
  .total-stat-val.spd { color: #81c784; }
  .total-stat-val.crit { color: #ff8a65; }
  .total-stat-val.crit_dmg { color: #ffcc02; }

  /* ========================
     ì¹´ë“œ ëª©ë¡
     ======================== */
  .card-list {
    display: flex;
    flex-direction: column;
    gap: 6px;
    max-height: 350px;
    overflow-y: auto;
    padding-right: 4px;
  }

  .card-list::-webkit-scrollbar { width: 4px; }
  .card-list::-webkit-scrollbar-track { background: transparent; }
  .card-list::-webkit-scrollbar-thumb { background: var(--border); border-radius: 2px; }

  /* ========================
     ê°€ëŠ¥í•œ ì„¸íŠ¸ ëª©ë¡
     ======================== */
  .set-list { display: flex; flex-direction: column; gap: 8px; }

  .set-card {
    background: var(--bg-card);
    border: 1px solid var(--border);
    border-radius: 8px;
    padding: 14px 16px;
    cursor: pointer;
    transition: all 0.2s;
    position: relative;
  }

  .set-card:hover { border-color: var(--border-glow); transform: translateX(2px); }

  .set-card.set-type-pair { border-left: 3px solid var(--pair-color); }
  .set-card.set-type-twopair { border-left: 3px solid var(--twopair-color); }
  .set-card.set-type-triple { border-left: 3px solid var(--triple-color); }
  .set-card.set-type-fullhouse { border-left: 3px solid var(--fullhouse-color); }
  .set-card.set-type-straight { border-left: 3px solid var(--straight-color); }
  .set-card.set-type-none { border-left: 3px solid var(--text-muted); }

  .set-header { display: flex; align-items: center; gap: 10px; margin-bottom: 10px; }
  .set-rank { font-size: 11px; font-weight: 700; color: var(--text-muted); }

  .set-score {
    margin-left: auto;
    font-size: 11px;
    font-weight: 700;
    color: var(--gold);
    background: rgba(212,168,67,0.1);
    border: 1px solid rgba(212,168,67,0.2);
    padding: 2px 8px;
    border-radius: 4px;
  }

  .set-cards-preview {
    display: flex;
    gap: 6px;
    flex-wrap: wrap;
    margin-bottom: 10px;
  }

  .set-card-chip {
    display: flex;
    align-items: center;
    gap: 4px;
    padding: 3px 8px;
    background: rgba(255,255,255,0.03);
    border: 1px solid var(--border);
    border-radius: 4px;
    font-size: 10px;
  }

  .set-card-chip span { color: var(--text-secondary); }
  .set-card-chip .chip-icon { font-size: 12px; }

  .set-effects-preview { display: flex; gap: 6px; flex-wrap: wrap; }
  .set-effect-chip {
    font-size: 10px;
    padding: 2px 8px;
    border-radius: 3px;
    font-weight: 700;
  }

  .set-apply-btn {
    position: absolute;
    right: 12px;
    bottom: 12px;
    padding: 5px 14px;
    background: rgba(61,90,158,0.25);
    border: 1px solid var(--border-glow);
    color: var(--silver);
    border-radius: 4px;
    cursor: pointer;
    font-size: 10px;
    font-family: 'Noto Sans KR', sans-serif;
    letter-spacing: 1px;
    font-weight: 700;
    transition: all 0.2s;
  }

  .set-apply-btn:hover { background: rgba(61,90,158,0.5); color: var(--text-primary); }

  /* ë¹ˆ ìƒíƒœ */
  .empty-state {
    text-align: center;
    padding: 40px 20px;
    color: var(--text-muted);
    font-size: 12px;
    letter-spacing: 1px;
  }

  .empty-state-icon { font-size: 36px; opacity: 0.3; margin-bottom: 10px; }

  /* í† ìŠ¤íŠ¸ */
  #toast {
    position: fixed;
    bottom: 30px;
    left: 50%;
    transform: translateX(-50%) translateY(20px);
    background: var(--bg-panel);
    border: 1px solid var(--border);
    color: var(--text-primary);
    padding: 10px 20px;
    border-radius: 6px;
    font-size: 12px;
    letter-spacing: 0.5px;
    opacity: 0;
    transition: all 0.3s;
    z-index: 1000;
    pointer-events: none;
  }

  #toast.show {
    opacity: 1;
    transform: translateX(-50%) translateY(0);
  }

  #toast.success { border-color: var(--green); color: var(--green); }
  #toast.error { border-color: var(--red); color: var(--red); }

  /* ì¹´ë“œ ì„ íƒ íŒì˜¤ë²„ */
  .card-select-modal {
    display: none;
    position: fixed;
    top: 0; left: 0; right: 0; bottom: 0;
    background: rgba(0,0,0,0.7);
    z-index: 500;
    align-items: center;
    justify-content: center;
  }

  .card-select-modal.open { display: flex; }

  .card-select-inner {
    background: var(--bg-panel);
    border: 1px solid var(--border);
    border-radius: 12px;
    width: 500px;
    max-width: 95vw;
    max-height: 80vh;
    display: flex;
    flex-direction: column;
    overflow: hidden;
  }

  .modal-header {
    padding: 16px 20px;
    border-bottom: 1px solid var(--border);
    display: flex;
    align-items: center;
    justify-content: space-between;
  }

  .modal-title { font-size: 14px; font-weight: 700; color: var(--gold); }

  .modal-close {
    background: none;
    border: none;
    color: var(--text-muted);
    cursor: pointer;
    font-size: 18px;
    line-height: 1;
    padding: 0 4px;
    transition: color 0.2s;
  }

  .modal-close:hover { color: var(--text-primary); }

  .modal-body {
    flex: 1;
    overflow-y: auto;
    padding: 16px;
  }

  .modal-body .card-list { max-height: none; }

  /* í•„í„° ë°” */
  .filter-bar {
    display: flex;
    gap: 8px;
    margin-bottom: 16px;
    flex-wrap: wrap;
  }

  .filter-chip {
    padding: 4px 12px;
    background: var(--bg-dark);
    border: 1px solid var(--border);
    color: var(--text-muted);
    border-radius: 20px;
    cursor: pointer;
    font-size: 11px;
    font-weight: 700;
    transition: all 0.2s;
  }

  .filter-chip:hover { color: var(--text-primary); }
  .filter-chip.active { background: rgba(61,90,158,0.2); border-color: var(--border-glow); color: var(--silver); }

  /* ì„¹ì…˜ êµ¬ë¶„ì„  */
  .section-divider {
    display: flex;
    align-items: center;
    gap: 12px;
    margin: 16px 0;
  }

  .section-divider-line { flex: 1; height: 1px; background: var(--border); }
  .section-divider-text { font-size: 10px; color: var(--text-muted); letter-spacing: 2px; text-transform: uppercase; }

  @keyframes fadeIn {
    from { opacity: 0; transform: translateY(8px); }
    to { opacity: 1; transform: translateY(0); }
  }

  .animate-in { animation: fadeIn 0.25s ease forwards; }

  @media (max-width: 900px) {
    .main-grid { grid-template-columns: 1fr; }
  }
</style>
</head>
<body>

<div class="app">
  <header>
    <div class="header-title">MONSTER CARD SYSTEM</div>
    <div class="header-sub">Prototype v0.1 Â· Game Design Tool</div>
  </header>

  <div class="tabs">
    <button class="tab-btn active" onclick="switchTab(&#39;equip&#39;)">âš”ï¸ ì¹´ë“œ ì¥ì°©</button>
    <button class="tab-btn" onclick="switchTab(&#39;create&#39;)">âœ¨ ì¹´ë“œ ìƒì„±</button>
    <button class="tab-btn" onclick="switchTab(&#39;sets&#39;)">ğŸƒ ê°€ëŠ¥í•œ ì„¸íŠ¸ ì¡°í•©</button>
  </div>

  <!-- ì¥ì°© íƒ­ -->
  <div id="tab-equip" class="tab-content">
    <div class="main-grid">
      <div class="left-col">
        <!-- ì¹´ë“œ ì¸ë²¤í† ë¦¬ -->
        <div class="panel">
          <div class="panel-header">
            <div class="panel-title">ğŸ“¦ ì¸ë²¤í† ë¦¬</div>
            <span id="inv-count" style="font-size:11px;color:var(--text-muted);margin-left:auto;">5ì¥</span>
          </div>
          <div class="panel-body" style="padding:12px;">
            <div class="filter-bar" id="inv-filter">
              <div class="filter-chip active" data-filter="all" onclick="filterInventory(&#39;all&#39;,this)">ì „ì²´</div>
              <div class="filter-chip" data-filter="N" onclick="filterInventory(&#39;N&#39;,this)">N</div>
              <div class="filter-chip" data-filter="R" onclick="filterInventory(&#39;R&#39;,this)">R</div>
              <div class="filter-chip" data-filter="SR" onclick="filterInventory(&#39;SR&#39;,this)">SR</div>
              <div class="filter-chip" data-filter="SSR" onclick="filterInventory(&#39;SSR&#39;,this)">SSR</div>
            </div>
            <div class="card-list" id="inventory-list"><div class="card-item grade-R" data-grade="R" data-id="qlyxfub" style="animation:fadeIn 0.2s ease">
      <div class="card-icon" style="background:rgba(255,255,255,0.04);border:1px solid var(--border);">ğŸ‘º</div>
      <div class="card-info">
        <div style="display:flex;align-items:center;gap:6px;margin-bottom:2px;">
          <span class="card-grade-badge">R</span>
          <span style="font-size:10px;color:var(--text-muted);">goblin</span>
        </div>
        <div class="card-name">ë¶ˆê½ƒ ê³ ë¸”ë¦°</div>
        <div class="card-stats"><span class="stat-badge hp">+100 HP</span><span class="stat-badge atk">+80 ê³µê²©</span><span class="stat-badge spd">+5 ì†ë„</span><span class="stat-badge crit">+3% ì¹˜ëª…ë¥ </span></div>
      </div>
      <div style="display:flex;flex-direction:column;gap:4px;flex-shrink:0;">
        <button class="btn-sm" onclick="quickEquip(&#39;qlyxfub&#39;)">ì¥ì°©</button>
      </div>
    </div><div class="card-item grade-R" data-grade="R" data-id="bsiv3af" style="animation:fadeIn 0.2s ease">
      <div class="card-icon" style="background:rgba(255,255,255,0.04);border:1px solid var(--border);">ğŸ‘¹</div>
      <div class="card-info">
        <div style="display:flex;align-items:center;gap:6px;margin-bottom:2px;">
          <span class="card-grade-badge">R</span>
          <span style="font-size:10px;color:var(--text-muted);">goblin</span>
        </div>
        <div class="card-name">ìˆ˜í˜¸ ê³ ë¸”ë¦°</div>
        <div class="card-stats"><span class="stat-badge hp">+200 HP</span><span class="stat-badge atk">+30 ê³µê²©</span><span class="stat-badge def">+60 ë°©ì–´</span></div>
      </div>
      <div style="display:flex;flex-direction:column;gap:4px;flex-shrink:0;">
        <button class="btn-sm" onclick="quickEquip(&#39;bsiv3af&#39;)">ì¥ì°©</button>
      </div>
    </div><div class="card-item grade-N" data-grade="N" data-id="os6ajhb" style="animation:fadeIn 0.2s ease">
      <div class="card-icon" style="background:rgba(255,255,255,0.04);border:1px solid var(--border);">ğŸŒ‘</div>
      <div class="card-info">
        <div style="display:flex;align-items:center;gap:6px;margin-bottom:2px;">
          <span class="card-grade-badge">N</span>
          <span style="font-size:10px;color:var(--text-muted);">slime</span>
        </div>
        <div class="card-name">ì•”í‘ ìŠ¬ë¼ì„</div>
        <div class="card-stats"><span class="stat-badge hp">+50 HP</span><span class="stat-badge atk">+20 ê³µê²©</span><span class="stat-badge def">+10 ë°©ì–´</span></div>
      </div>
      <div style="display:flex;flex-direction:column;gap:4px;flex-shrink:0;">
        <button class="btn-sm" onclick="quickEquip(&#39;os6ajhb&#39;)">ì¥ì°©</button>
      </div>
    </div><div class="card-item grade-N" data-grade="N" data-id="4e4u3hx" style="animation:fadeIn 0.2s ease">
      <div class="card-icon" style="background:rgba(255,255,255,0.04);border:1px solid var(--border);">ğŸ”¥</div>
      <div class="card-info">
        <div style="display:flex;align-items:center;gap:6px;margin-bottom:2px;">
          <span class="card-grade-badge">N</span>
          <span style="font-size:10px;color:var(--text-muted);">slime</span>
        </div>
        <div class="card-name">ìš©ì•” ìŠ¬ë¼ì„</div>
        <div class="card-stats"><span class="stat-badge hp">+30 HP</span><span class="stat-badge atk">+50 ê³µê²©</span><span class="stat-badge def">+5 ë°©ì–´</span><span class="stat-badge crit">+2% ì¹˜ëª…ë¥ </span></div>
      </div>
      <div style="display:flex;flex-direction:column;gap:4px;flex-shrink:0;">
        <button class="btn-sm" onclick="quickEquip(&#39;4e4u3hx&#39;)">ì¥ì°©</button>
      </div>
    </div><div class="card-item grade-SSR" data-grade="SSR" data-id="7wgbmzd" style="animation:fadeIn 0.2s ease">
      <div class="card-icon" style="background:rgba(255,255,255,0.04);border:1px solid var(--border);">ğŸ‰</div>
      <div class="card-info">
        <div style="display:flex;align-items:center;gap:6px;margin-bottom:2px;">
          <span class="card-grade-badge">SSR</span>
          <span style="font-size:10px;color:var(--text-muted);">dragon</span>
        </div>
        <div class="card-name">ê³ ëŒ€ ë“œë˜ê³¤</div>
        <div class="card-stats"><span class="stat-badge hp">+500 HP</span><span class="stat-badge atk">+300 ê³µê²©</span><span class="stat-badge def">+100 ë°©ì–´</span><span class="stat-badge spd">+10 ì†ë„</span><span class="stat-badge crit">+10% ì¹˜ëª…ë¥ </span><span class="stat-badge crit_dmg">+30% ì¹˜ëª…í”¼í•´</span></div>
      </div>
      <div style="display:flex;flex-direction:column;gap:4px;flex-shrink:0;">
        <button class="btn-sm" onclick="quickEquip(&#39;7wgbmzd&#39;)">ì¥ì°©</button>
      </div>
    </div></div>
          </div>
        </div>
      </div>

      <div class="right-col">
        <!-- ìŠ¬ë¡¯ ì¥ì°© ì˜ì—­ -->
        <div class="panel">
          <div class="panel-header">
            <div class="panel-title">âš”ï¸ ì¹´ë“œ ìŠ¬ë¡¯</div>
            <span style="font-size:11px;color:var(--text-muted);margin-left:auto;">ìŠ¬ë¡¯ì„ í´ë¦­í•˜ì—¬ ì¹´ë“œë¥¼ ì¥ì°©í•˜ì„¸ìš”</span>
          </div>
          <div class="panel-body">
            <div class="slots-grid" id="slots-grid">
        <div class="slot" onclick="openModal(0)">
          <div class="slot-number">SLOT 1</div>
          <div class="slot-empty-icon">â¬œ</div>
          <div class="slot-empty-text">í´ë¦­í•˜ì—¬ ì¥ì°©</div>
        </div>
        <div class="slot" onclick="openModal(1)">
          <div class="slot-number">SLOT 2</div>
          <div class="slot-empty-icon">â¬œ</div>
          <div class="slot-empty-text">í´ë¦­í•˜ì—¬ ì¥ì°©</div>
        </div>
        <div class="slot" onclick="openModal(2)">
          <div class="slot-number">SLOT 3</div>
          <div class="slot-empty-icon">â¬œ</div>
          <div class="slot-empty-text">í´ë¦­í•˜ì—¬ ì¥ì°©</div>
        </div>
        <div class="slot" onclick="openModal(3)">
          <div class="slot-number">SLOT 4</div>
          <div class="slot-empty-icon">â¬œ</div>
          <div class="slot-empty-text">í´ë¦­í•˜ì—¬ ì¥ì°©</div>
        </div>
        <div class="slot" onclick="openModal(4)">
          <div class="slot-number">SLOT 5</div>
          <div class="slot-empty-icon">â¬œ</div>
          <div class="slot-empty-text">í´ë¦­í•˜ì—¬ ì¥ì°©</div>
        </div></div>
          </div>
        </div>

        <!-- íš¨ê³¼ í•©ì‚° -->
        <div class="panel">
          <div class="panel-header">
            <div class="panel-title">âœ¨ íš¨ê³¼ í•©ì‚°</div>
          </div>
          <div class="panel-body">
            <div id="effect-summary"><div class="empty-state" style="padding:20px;"><div class="empty-state-icon">ğŸ“Š</div>ì¹´ë“œë¥¼ ì¥ì°©í•˜ë©´ íš¨ê³¼ê°€ í‘œì‹œë©ë‹ˆë‹¤</div></div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- ìƒì„± íƒ­ -->
  <div id="tab-create" class="tab-content" style="display:none;">
    <div class="main-grid">
      <div class="left-col">
        <div class="panel">
          <div class="panel-header">
            <div class="panel-title">âœ¨ ì¹´ë“œ ìƒì„±</div>
          </div>
          <div class="panel-body">
            <div class="form-group">
              <label class="form-label">ëª¬ìŠ¤í„° ì´ë¦„</label>
              <input class="form-input" id="card-name" placeholder="ì˜ˆ: ë¶ˆê½ƒ ê³ ë¸”ë¦°" maxlength="20">
            </div>
            <div class="form-group">
              <label class="form-label">ëª¬ìŠ¤í„° ì¢…ë¥˜ (ë™ì¼ ì¢…ë¥˜ëŠ” ì¤‘ë³µ ì¥ì°© ë¶ˆê°€)</label>
              <input class="form-input" id="card-type" placeholder="ì˜ˆ: goblin, slime, dragon..." maxlength="20">
            </div>
            <div class="form-group">
              <label class="form-label">ì•„ì´ì½˜</label>
              <div style="display:flex;gap:8px;flex-wrap:wrap;" id="icon-selector">
    <div onclick="selectIcon(&#39;ğŸ”¥&#39;,this)" style="
      width:36px;height:36px;display:flex;align-items:center;justify-content:center;
      font-size:20px;border-radius:6px;cursor:pointer;transition:all 0.15s;
      background:rgba(61,90,158,0.3);
      border:1px solid var(--border-glow);
    " data-icon="ğŸ”¥">ğŸ”¥</div>
  
    <div onclick="selectIcon(&#39;ğŸ’§&#39;,this)" style="
      width:36px;height:36px;display:flex;align-items:center;justify-content:center;
      font-size:20px;border-radius:6px;cursor:pointer;transition:all 0.15s;
      background:rgba(255,255,255,0.03);
      border:1px solid var(--border);
    " data-icon="ğŸ’§">ğŸ’§</div>
  
    <div onclick="selectIcon(&#39;âš¡&#39;,this)" style="
      width:36px;height:36px;display:flex;align-items:center;justify-content:center;
      font-size:20px;border-radius:6px;cursor:pointer;transition:all 0.15s;
      background:rgba(255,255,255,0.03);
      border:1px solid var(--border);
    " data-icon="âš¡">âš¡</div>
  
    <div onclick="selectIcon(&#39;ğŸŒ¿&#39;,this)" style="
      width:36px;height:36px;display:flex;align-items:center;justify-content:center;
      font-size:20px;border-radius:6px;cursor:pointer;transition:all 0.15s;
      background:rgba(255,255,255,0.03);
      border:1px solid var(--border);
    " data-icon="ğŸŒ¿">ğŸŒ¿</div>
  
    <div onclick="selectIcon(&#39;ğŸŒ‘&#39;,this)" style="
      width:36px;height:36px;display:flex;align-items:center;justify-content:center;
      font-size:20px;border-radius:6px;cursor:pointer;transition:all 0.15s;
      background:rgba(255,255,255,0.03);
      border:1px solid var(--border);
    " data-icon="ğŸŒ‘">ğŸŒ‘</div>
  
    <div onclick="selectIcon(&#39;â„ï¸&#39;,this)" style="
      width:36px;height:36px;display:flex;align-items:center;justify-content:center;
      font-size:20px;border-radius:6px;cursor:pointer;transition:all 0.15s;
      background:rgba(255,255,255,0.03);
      border:1px solid var(--border);
    " data-icon="â„ï¸">â„ï¸</div>
  
    <div onclick="selectIcon(&#39;ğŸ‰&#39;,this)" style="
      width:36px;height:36px;display:flex;align-items:center;justify-content:center;
      font-size:20px;border-radius:6px;cursor:pointer;transition:all 0.15s;
      background:rgba(255,255,255,0.03);
      border:1px solid var(--border);
    " data-icon="ğŸ‰">ğŸ‰</div>
  
    <div onclick="selectIcon(&#39;ğŸº&#39;,this)" style="
      width:36px;height:36px;display:flex;align-items:center;justify-content:center;
      font-size:20px;border-radius:6px;cursor:pointer;transition:all 0.15s;
      background:rgba(255,255,255,0.03);
      border:1px solid var(--border);
    " data-icon="ğŸº">ğŸº</div>
  
    <div onclick="selectIcon(&#39;ğŸ¦‚&#39;,this)" style="
      width:36px;height:36px;display:flex;align-items:center;justify-content:center;
      font-size:20px;border-radius:6px;cursor:pointer;transition:all 0.15s;
      background:rgba(255,255,255,0.03);
      border:1px solid var(--border);
    " data-icon="ğŸ¦‚">ğŸ¦‚</div>
  
    <div onclick="selectIcon(&#39;ğŸ¦&#39;,this)" style="
      width:36px;height:36px;display:flex;align-items:center;justify-content:center;
      font-size:20px;border-radius:6px;cursor:pointer;transition:all 0.15s;
      background:rgba(255,255,255,0.03);
      border:1px solid var(--border);
    " data-icon="ğŸ¦">ğŸ¦</div>
  
    <div onclick="selectIcon(&#39;ğŸ¸&#39;,this)" style="
      width:36px;height:36px;display:flex;align-items:center;justify-content:center;
      font-size:20px;border-radius:6px;cursor:pointer;transition:all 0.15s;
      background:rgba(255,255,255,0.03);
      border:1px solid var(--border);
    " data-icon="ğŸ¸">ğŸ¸</div>
  
    <div onclick="selectIcon(&#39;ğŸ¦Š&#39;,this)" style="
      width:36px;height:36px;display:flex;align-items:center;justify-content:center;
      font-size:20px;border-radius:6px;cursor:pointer;transition:all 0.15s;
      background:rgba(255,255,255,0.03);
      border:1px solid var(--border);
    " data-icon="ğŸ¦Š">ğŸ¦Š</div>
  
    <div onclick="selectIcon(&#39;ğŸ¦‡&#39;,this)" style="
      width:36px;height:36px;display:flex;align-items:center;justify-content:center;
      font-size:20px;border-radius:6px;cursor:pointer;transition:all 0.15s;
      background:rgba(255,255,255,0.03);
      border:1px solid var(--border);
    " data-icon="ğŸ¦‡">ğŸ¦‡</div>
  
    <div onclick="selectIcon(&#39;ğŸ•·ï¸&#39;,this)" style="
      width:36px;height:36px;display:flex;align-items:center;justify-content:center;
      font-size:20px;border-radius:6px;cursor:pointer;transition:all 0.15s;
      background:rgba(255,255,255,0.03);
      border:1px solid var(--border);
    " data-icon="ğŸ•·ï¸">ğŸ•·ï¸</div>
  
    <div onclick="selectIcon(&#39;ğŸ’€&#39;,this)" style="
      width:36px;height:36px;display:flex;align-items:center;justify-content:center;
      font-size:20px;border-radius:6px;cursor:pointer;transition:all 0.15s;
      background:rgba(255,255,255,0.03);
      border:1px solid var(--border);
    " data-icon="ğŸ’€">ğŸ’€</div>
  
    <div onclick="selectIcon(&#39;âš”ï¸&#39;,this)" style="
      width:36px;height:36px;display:flex;align-items:center;justify-content:center;
      font-size:20px;border-radius:6px;cursor:pointer;transition:all 0.15s;
      background:rgba(255,255,255,0.03);
      border:1px solid var(--border);
    " data-icon="âš”ï¸">âš”ï¸</div>
  
    <div onclick="selectIcon(&#39;ğŸ—¡ï¸&#39;,this)" style="
      width:36px;height:36px;display:flex;align-items:center;justify-content:center;
      font-size:20px;border-radius:6px;cursor:pointer;transition:all 0.15s;
      background:rgba(255,255,255,0.03);
      border:1px solid var(--border);
    " data-icon="ğŸ—¡ï¸">ğŸ—¡ï¸</div>
  
    <div onclick="selectIcon(&#39;ğŸ›¡ï¸&#39;,this)" style="
      width:36px;height:36px;display:flex;align-items:center;justify-content:center;
      font-size:20px;border-radius:6px;cursor:pointer;transition:all 0.15s;
      background:rgba(255,255,255,0.03);
      border:1px solid var(--border);
    " data-icon="ğŸ›¡ï¸">ğŸ›¡ï¸</div>
  
    <div onclick="selectIcon(&#39;ğŸŒ€&#39;,this)" style="
      width:36px;height:36px;display:flex;align-items:center;justify-content:center;
      font-size:20px;border-radius:6px;cursor:pointer;transition:all 0.15s;
      background:rgba(255,255,255,0.03);
      border:1px solid var(--border);
    " data-icon="ğŸŒ€">ğŸŒ€</div>
  
    <div onclick="selectIcon(&#39;ğŸŒªï¸&#39;,this)" style="
      width:36px;height:36px;display:flex;align-items:center;justify-content:center;
      font-size:20px;border-radius:6px;cursor:pointer;transition:all 0.15s;
      background:rgba(255,255,255,0.03);
      border:1px solid var(--border);
    " data-icon="ğŸŒªï¸">ğŸŒªï¸</div>
  
    <div onclick="selectIcon(&#39;ğŸ”®&#39;,this)" style="
      width:36px;height:36px;display:flex;align-items:center;justify-content:center;
      font-size:20px;border-radius:6px;cursor:pointer;transition:all 0.15s;
      background:rgba(255,255,255,0.03);
      border:1px solid var(--border);
    " data-icon="ğŸ”®">ğŸ”®</div>
  
    <div onclick="selectIcon(&#39;ğŸ’&#39;,this)" style="
      width:36px;height:36px;display:flex;align-items:center;justify-content:center;
      font-size:20px;border-radius:6px;cursor:pointer;transition:all 0.15s;
      background:rgba(255,255,255,0.03);
      border:1px solid var(--border);
    " data-icon="ğŸ’">ğŸ’</div>
  
    <div onclick="selectIcon(&#39;ğŸ‘¹&#39;,this)" style="
      width:36px;height:36px;display:flex;align-items:center;justify-content:center;
      font-size:20px;border-radius:6px;cursor:pointer;transition:all 0.15s;
      background:rgba(255,255,255,0.03);
      border:1px solid var(--border);
    " data-icon="ğŸ‘¹">ğŸ‘¹</div>
  
    <div onclick="selectIcon(&#39;ğŸ‘º&#39;,this)" style="
      width:36px;height:36px;display:flex;align-items:center;justify-content:center;
      font-size:20px;border-radius:6px;cursor:pointer;transition:all 0.15s;
      background:rgba(255,255,255,0.03);
      border:1px solid var(--border);
    " data-icon="ğŸ‘º">ğŸ‘º</div>
  
    <div onclick="selectIcon(&#39;ğŸ²&#39;,this)" style="
      width:36px;height:36px;display:flex;align-items:center;justify-content:center;
      font-size:20px;border-radius:6px;cursor:pointer;transition:all 0.15s;
      background:rgba(255,255,255,0.03);
      border:1px solid var(--border);
    " data-icon="ğŸ²">ğŸ²</div>
  
    <div onclick="selectIcon(&#39;ğŸ¦…&#39;,this)" style="
      width:36px;height:36px;display:flex;align-items:center;justify-content:center;
      font-size:20px;border-radius:6px;cursor:pointer;transition:all 0.15s;
      background:rgba(255,255,255,0.03);
      border:1px solid var(--border);
    " data-icon="ğŸ¦…">ğŸ¦…</div>
  
    <div onclick="selectIcon(&#39;ğŸ&#39;,this)" style="
      width:36px;height:36px;display:flex;align-items:center;justify-content:center;
      font-size:20px;border-radius:6px;cursor:pointer;transition:all 0.15s;
      background:rgba(255,255,255,0.03);
      border:1px solid var(--border);
    " data-icon="ğŸ">ğŸ</div>
  
    <div onclick="selectIcon(&#39;ğŸ¦ˆ&#39;,this)" style="
      width:36px;height:36px;display:flex;align-items:center;justify-content:center;
      font-size:20px;border-radius:6px;cursor:pointer;transition:all 0.15s;
      background:rgba(255,255,255,0.03);
      border:1px solid var(--border);
    " data-icon="ğŸ¦ˆ">ğŸ¦ˆ</div>
  </div>
            </div>
            <div class="form-group">
              <label class="form-label">ë“±ê¸‰</label>
              <div class="grade-selector">
                <button class="grade-btn" data-grade="N" onclick="selectGrade(&#39;N&#39;,this)">N</button>
                <button class="grade-btn active" data-grade="R" onclick="selectGrade(&#39;R&#39;,this)">R</button>
                <button class="grade-btn" data-grade="SR" onclick="selectGrade(&#39;SR&#39;,this)">SR</button>
                <button class="grade-btn" data-grade="SSR" onclick="selectGrade(&#39;SSR&#39;,this)">SSR</button>
              </div>
            </div>

            <div class="section-divider">
              <div class="section-divider-line"></div>
              <div class="section-divider-text">ê°œë³„ íš¨ê³¼ ìŠ¤íƒ¯</div>
              <div class="section-divider-line"></div>
            </div>

            <div class="stat-row">
              <div class="form-group">
                <label class="form-label">â¤ï¸ HP</label>
                <input class="form-input" id="stat-hp" type="number" min="0" max="9999" placeholder="0">
              </div>
              <div class="form-group">
                <label class="form-label">âš”ï¸ ê³µê²©ë ¥</label>
                <input class="form-input" id="stat-atk" type="number" min="0" max="9999" placeholder="0">
              </div>
            </div>
            <div class="stat-row">
              <div class="form-group">
                <label class="form-label">ğŸ›¡ï¸ ë°©ì–´ë ¥</label>
                <input class="form-input" id="stat-def" type="number" min="0" max="9999" placeholder="0">
              </div>
              <div class="form-group">
                <label class="form-label">ğŸ’¨ ì´ë™ì†ë„</label>
                <input class="form-input" id="stat-spd" type="number" min="0" max="999" placeholder="0">
              </div>
            </div>
            <div class="stat-row">
              <div class="form-group">
                <label class="form-label">ğŸ¯ ì¹˜ëª…íƒ€ìœ¨ (%)</label>
                <input class="form-input" id="stat-crit" type="number" min="0" max="100" placeholder="0">
              </div>
              <div class="form-group">
                <label class="form-label">ğŸ’¥ ì¹˜ëª…íƒ€ í”¼í•´ (%)</label>
                <input class="form-input" id="stat-crit_dmg" type="number" min="0" max="999" placeholder="0">
              </div>
            </div>

            <div class="section-divider">
              <div class="section-divider-line"></div>
              <div class="section-divider-text">ì„¸íŠ¸ íš¨ê³¼ (ì¡±ë³´ìš©)</div>
              <div class="section-divider-line"></div>
            </div>

            <div class="form-group">
              <label class="form-label">í˜ì–´ íš¨ê³¼ ì„¤ëª…</label>
              <input class="form-input" id="set-pair" placeholder="ì˜ˆ: HP +500, í”¼í•´ê°ì†Œ +5%">
            </div>
            <div class="form-group">
              <label class="form-label">íŠ¸ë¦¬í”Œ íš¨ê³¼ ì„¤ëª…</label>
              <input class="form-input" id="set-triple" placeholder="ì˜ˆ: ê³µê²©ë ¥ +15%, ì¹˜ëª…íƒ€ìœ¨ +10%">
            </div>
            <div class="form-group">
              <label class="form-label">ìŠ¤íŠ¸ë ˆì´íŠ¸ íš¨ê³¼ ì„¤ëª… (5ì¥ ë™ì¼ ì¢…ë¥˜)</label>
              <input class="form-input" id="set-straight" placeholder="ì˜ˆ: ì›ì†Œ í­ë°œ ë°ë¯¸ì§€ +30%">
            </div>

            <button class="btn-primary" onclick="createCard()">âœ¨ ì¹´ë“œ ìƒì„±</button>
          </div>
        </div>
      </div>

      <div class="right-col">
        <div class="panel">
          <div class="panel-header">
            <div class="panel-title">ğŸ“¦ ìƒì„±ëœ ì¹´ë“œ ëª©ë¡</div>
            <button class="btn-danger" style="margin-left:auto;" onclick="clearAll()">ì „ì²´ ì‚­ì œ</button>
          </div>
          <div class="panel-body" style="padding:12px;">
            <div class="card-list" id="created-card-list" style="max-height:600px;">
    <div class="card-item grade-R" data-grade="R" data-id="qlyxfub" style="animation:fadeIn 0.2s ease">
      <div class="card-icon" style="background:rgba(255,255,255,0.04);border:1px solid var(--border);">ğŸ‘º</div>
      <div class="card-info">
        <div style="display:flex;align-items:center;gap:6px;margin-bottom:2px;">
          <span class="card-grade-badge">R</span>
          <span style="font-size:10px;color:var(--text-muted);">goblin</span>
        </div>
        <div class="card-name">ë¶ˆê½ƒ ê³ ë¸”ë¦°</div>
        <div class="card-stats"><span class="stat-badge hp">+100 HP</span><span class="stat-badge atk">+80 ê³µê²©</span><span class="stat-badge spd">+5 ì†ë„</span><span class="stat-badge crit">+3% ì¹˜ëª…ë¥ </span></div>
      </div>
      <div style="display:flex;flex-direction:column;gap:4px;flex-shrink:0;">
        <button class="btn-danger" onclick="deleteCard(&#39;qlyxfub&#39;)">ì‚­ì œ</button>
      </div>
    </div>
  
    <div class="card-item grade-R" data-grade="R" data-id="bsiv3af" style="animation:fadeIn 0.2s ease">
      <div class="card-icon" style="background:rgba(255,255,255,0.04);border:1px solid var(--border);">ğŸ‘¹</div>
      <div class="card-info">
        <div style="display:flex;align-items:center;gap:6px;margin-bottom:2px;">
          <span class="card-grade-badge">R</span>
          <span style="font-size:10px;color:var(--text-muted);">goblin</span>
        </div>
        <div class="card-name">ìˆ˜í˜¸ ê³ ë¸”ë¦°</div>
        <div class="card-stats"><span class="stat-badge hp">+200 HP</span><span class="stat-badge atk">+30 ê³µê²©</span><span class="stat-badge def">+60 ë°©ì–´</span></div>
      </div>
      <div style="display:flex;flex-direction:column;gap:4px;flex-shrink:0;">
        <button class="btn-danger" onclick="deleteCard(&#39;bsiv3af&#39;)">ì‚­ì œ</button>
      </div>
    </div>
  
    <div class="card-item grade-N" data-grade="N" data-id="os6ajhb" style="animation:fadeIn 0.2s ease">
      <div class="card-icon" style="background:rgba(255,255,255,0.04);border:1px solid var(--border);">ğŸŒ‘</div>
      <div class="card-info">
        <div style="display:flex;align-items:center;gap:6px;margin-bottom:2px;">
          <span class="card-grade-badge">N</span>
          <span style="font-size:10px;color:var(--text-muted);">slime</span>
        </div>
        <div class="card-name">ì•”í‘ ìŠ¬ë¼ì„</div>
        <div class="card-stats"><span class="stat-badge hp">+50 HP</span><span class="stat-badge atk">+20 ê³µê²©</span><span class="stat-badge def">+10 ë°©ì–´</span></div>
      </div>
      <div style="display:flex;flex-direction:column;gap:4px;flex-shrink:0;">
        <button class="btn-danger" onclick="deleteCard(&#39;os6ajhb&#39;)">ì‚­ì œ</button>
      </div>
    </div>
  
    <div class="card-item grade-N" data-grade="N" data-id="4e4u3hx" style="animation:fadeIn 0.2s ease">
      <div class="card-icon" style="background:rgba(255,255,255,0.04);border:1px solid var(--border);">ğŸ”¥</div>
      <div class="card-info">
        <div style="display:flex;align-items:center;gap:6px;margin-bottom:2px;">
          <span class="card-grade-badge">N</span>
          <span style="font-size:10px;color:var(--text-muted);">slime</span>
        </div>
        <div class="card-name">ìš©ì•” ìŠ¬ë¼ì„</div>
        <div class="card-stats"><span class="stat-badge hp">+30 HP</span><span class="stat-badge atk">+50 ê³µê²©</span><span class="stat-badge def">+5 ë°©ì–´</span><span class="stat-badge crit">+2% ì¹˜ëª…ë¥ </span></div>
      </div>
      <div style="display:flex;flex-direction:column;gap:4px;flex-shrink:0;">
        <button class="btn-danger" onclick="deleteCard(&#39;4e4u3hx&#39;)">ì‚­ì œ</button>
      </div>
    </div>
  
    <div class="card-item grade-SSR" data-grade="SSR" data-id="7wgbmzd" style="animation:fadeIn 0.2s ease">
      <div class="card-icon" style="background:rgba(255,255,255,0.04);border:1px solid var(--border);">ğŸ‰</div>
      <div class="card-info">
        <div style="display:flex;align-items:center;gap:6px;margin-bottom:2px;">
          <span class="card-grade-badge">SSR</span>
          <span style="font-size:10px;color:var(--text-muted);">dragon</span>
        </div>
        <div class="card-name">ê³ ëŒ€ ë“œë˜ê³¤</div>
        <div class="card-stats"><span class="stat-badge hp">+500 HP</span><span class="stat-badge atk">+300 ê³µê²©</span><span class="stat-badge def">+100 ë°©ì–´</span><span class="stat-badge spd">+10 ì†ë„</span><span class="stat-badge crit">+10% ì¹˜ëª…ë¥ </span><span class="stat-badge crit_dmg">+30% ì¹˜ëª…í”¼í•´</span></div>
      </div>
      <div style="display:flex;flex-direction:column;gap:4px;flex-shrink:0;">
        <button class="btn-danger" onclick="deleteCard(&#39;7wgbmzd&#39;)">ì‚­ì œ</button>
      </div>
    </div>
  </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- ì„¸íŠ¸ ì¡°í•© íƒ­ -->
  <div id="tab-sets" class="tab-content" style="display:none;">
    <div class="panel">
      <div class="panel-header">
        <div class="panel-title">ğŸƒ ê°€ëŠ¥í•œ ì„¸íŠ¸ ì¡°í•©</div>
        <span style="font-size:11px;color:var(--text-muted);margin-left:auto;">íš¨ê³¼ ì ìˆ˜ ê¸°ì¤€ ì •ë ¬ Â· í´ë¦­ì‹œ ìŠ¬ë¡¯ì— ë°”ë¡œ ì ìš©</span>
      </div>
      <div class="panel-body">
        <div id="all-sets-list"><div class="empty-state"><div class="empty-state-icon">ğŸƒ</div>ì¥ì°© ê°€ëŠ¥í•œ 5ì¥ ì¡°í•©ì´ ì—†ìŠµë‹ˆë‹¤<br><small style="color:var(--text-muted);">(ë™ì¼ ì¢…ë¥˜ ì¹´ë“œëŠ” ì¤‘ë³µ ì¥ì°© ë¶ˆê°€)</small></div></div>
      </div>
    </div>
  </div>
</div>

<!-- ì¹´ë“œ ì„ íƒ ëª¨ë‹¬ -->
<div class="card-select-modal" id="card-modal">
  <div class="card-select-inner">
    <div class="modal-header">
      <div class="modal-title">ì¹´ë“œ ì„ íƒ</div>
      <button class="modal-close" onclick="closeModal()">âœ•</button>
    </div>
    <div class="modal-body">
      <div class="card-list" id="modal-card-list"></div>
    </div>
  </div>
</div>

<div id="toast"></div>

<script>
// ================================
// ë°ì´í„°
// ================================
let cards = [];
let equippedSlots = [null, null, null, null, null];
let selectedGrade = 'R';
let selectedIcon = 'ğŸ”¥';
let activeModalSlot = null;
let invFilter = 'all';

const ICONS = ['ğŸ”¥','ğŸ’§','âš¡','ğŸŒ¿','ğŸŒ‘','â„ï¸','ğŸ‰','ğŸº','ğŸ¦‚','ğŸ¦','ğŸ¸','ğŸ¦Š','ğŸ¦‡','ğŸ•·ï¸','ğŸ’€','âš”ï¸','ğŸ—¡ï¸','ğŸ›¡ï¸','ğŸŒ€','ğŸŒªï¸','ğŸ”®','ğŸ’','ğŸ‘¹','ğŸ‘º','ğŸ²','ğŸ¦…','ğŸ','ğŸ¦ˆ'];

const STAT_LABELS = { hp: 'HP', atk: 'ê³µê²©', def: 'ë°©ì–´', spd: 'ì†ë„', crit: 'ì¹˜ëª…ë¥ ', crit_dmg: 'ì¹˜ëª…í”¼í•´' };
const STAT_UNIT = { hp: '', atk: '', def: '', spd: '', crit: '%', crit_dmg: '%' };

// ================================
// ì´ˆê¸°í™”
// ================================
function init() {
  renderIconSelector();
  renderSlots();
  loadSampleCards();
}

function loadSampleCards() {
  const samples = [
    { id: uid(), name: 'ë¶ˆê½ƒ ê³ ë¸”ë¦°', type: 'goblin', icon: 'ğŸ‘º', grade: 'R', stats: { hp: 100, atk: 80, def: 0, spd: 5, crit: 3, crit_dmg: 0 }, setEffects: { pair: 'ATK +10%', triple: 'ATK +20%, CRIT +5%', straight: 'ì›ì†Œ í­ë°œ ë°ë¯¸ì§€ +25%' }},
    { id: uid(), name: 'ìˆ˜í˜¸ ê³ ë¸”ë¦°', type: 'goblin', icon: 'ğŸ‘¹', grade: 'R', stats: { hp: 200, atk: 30, def: 60, spd: 0, crit: 0, crit_dmg: 0 }, setEffects: { pair: 'ATK +10%', triple: 'ATK +20%, CRIT +5%', straight: 'ì›ì†Œ í­ë°œ ë°ë¯¸ì§€ +25%' }},
    { id: uid(), name: 'ì•”í‘ ìŠ¬ë¼ì„', type: 'slime', icon: 'ğŸŒ‘', grade: 'N', stats: { hp: 50, atk: 20, def: 10, spd: 0, crit: 0, crit_dmg: 0 }, setEffects: { pair: 'DEF +15%', triple: 'HP +1000, DEF +20%', straight: 'í”¼í•´ í¡ìˆ˜ +10%' }},
    { id: uid(), name: 'ìš©ì•” ìŠ¬ë¼ì„', type: 'slime', icon: 'ğŸ”¥', grade: 'N', stats: { hp: 30, atk: 50, def: 5, spd: 0, crit: 2, crit_dmg: 0 }, setEffects: { pair: 'DEF +15%', triple: 'HP +1000, DEF +20%', straight: 'í”¼í•´ í¡ìˆ˜ +10%' }},
    { id: uid(), name: 'ê³ ëŒ€ ë“œë˜ê³¤', type: 'dragon', icon: 'ğŸ‰', grade: 'SSR', stats: { hp: 500, atk: 300, def: 100, spd: 10, crit: 10, crit_dmg: 30 }, setEffects: { pair: 'ATK +25%', triple: 'ATK +40%, CRIT_DMG +20%', straight: 'ìš©ì˜ ë¶„ë…¸: ìŠ¤í‚¬ ë°ë¯¸ì§€ +50%' }},
  ];
  cards = samples;
  renderAll();
}

function uid() { return Math.random().toString(36).slice(2,9); }

// ================================
// ë Œë”ë§
// ================================
function renderAll() {
  renderInventory();
  renderCreatedList();
  renderSlots();
  renderEffectSummary();
  renderAllSets();
}

function renderIconSelector() {
  const el = document.getElementById('icon-selector');
  el.innerHTML = ICONS.map(icon => `
    <div onclick="selectIcon('${icon}',this)" style="
      width:36px;height:36px;display:flex;align-items:center;justify-content:center;
      font-size:20px;border-radius:6px;cursor:pointer;transition:all 0.15s;
      background:${icon===selectedIcon?'rgba(61,90,158,0.3)':'rgba(255,255,255,0.03)'};
      border:1px solid ${icon===selectedIcon?'var(--border-glow)':'var(--border)'};
    " data-icon="${icon}">${icon}</div>
  `).join('');
}

function selectIcon(icon, el) {
  selectedIcon = icon;
  renderIconSelector();
}

function selectGrade(grade, el) {
  selectedGrade = grade;
  document.querySelectorAll('.grade-btn').forEach(b => b.classList.remove('active'));
  el.classList.add('active');
}

function filterInventory(filter, el) {
  invFilter = filter;
  document.querySelectorAll('#inv-filter .filter-chip').forEach(c => c.classList.remove('active'));
  el.classList.add('active');
  renderInventory();
}

function renderCardItem(card, actions) {
  const statStr = Object.entries(card.stats)
    .filter(([,v]) => v > 0)
    .map(([k,v]) => `<span class="stat-badge ${k}">+${v}${STAT_UNIT[k]} ${STAT_LABELS[k]}</span>`)
    .join('');

  const gradeColor = { N:'#718096', R:'#60a5fa', SR:'#a78bfa', SSR:'#d4a843' };

  return `
    <div class="card-item grade-${card.grade}" data-grade="${card.grade}" data-id="${card.id}" style="animation:fadeIn 0.2s ease">
      <div class="card-icon" style="background:rgba(255,255,255,0.04);border:1px solid var(--border);">${card.icon}</div>
      <div class="card-info">
        <div style="display:flex;align-items:center;gap:6px;margin-bottom:2px;">
          <span class="card-grade-badge">${card.grade}</span>
          <span style="font-size:10px;color:var(--text-muted);">${card.type}</span>
        </div>
        <div class="card-name">${card.name}</div>
        <div class="card-stats">${statStr || '<span style="color:var(--text-muted)">ìŠ¤íƒ¯ ì—†ìŒ</span>'}</div>
      </div>
      <div style="display:flex;flex-direction:column;gap:4px;flex-shrink:0;">
        ${actions}
      </div>
    </div>
  `;
}

function renderInventory() {
  const el = document.getElementById('inventory-list');
  document.getElementById('inv-count').textContent = cards.length + 'ì¥';

  const filtered = invFilter === 'all' ? cards : cards.filter(c => c.grade === invFilter);

  if (!filtered.length) {
    el.innerHTML = `<div class="empty-state"><div class="empty-state-icon">ğŸ´</div>í•´ë‹¹ ë“±ê¸‰ì˜ ì¹´ë“œê°€ ì—†ìŠµë‹ˆë‹¤</div>`;
    return;
  }

  // ì¥ì°©ëœ ì¹´ë“œ ID ì²´í¬
  const equippedIds = equippedSlots.filter(Boolean).map(c => c.id);

  el.innerHTML = filtered.map(card => {
    const isEquipped = equippedIds.includes(card.id);
    const dom = document.createElement('div');
    dom.innerHTML = renderCardItem(card,
      isEquipped
        ? `<span style="font-size:9px;color:var(--green);font-weight:700;letter-spacing:1px;">ì¥ì°©ì¤‘</span>`
        : `<button class="btn-sm" onclick="quickEquip('${card.id}')">ì¥ì°©</button>`
    );
    const item = dom.firstElementChild;
    if (isEquipped) item.classList.add('equipped');
    return item.outerHTML;
  }).join('');
}

function renderCreatedList() {
  const el = document.getElementById('created-card-list');
  if (!cards.length) {
    el.innerHTML = `<div class="empty-state"><div class="empty-state-icon">ğŸ´</div>ìƒì„±ëœ ì¹´ë“œê°€ ì—†ìŠµë‹ˆë‹¤</div>`;
    return;
  }
  el.innerHTML = cards.map(card =>
    renderCardItem(card, `<button class="btn-danger" onclick="deleteCard('${card.id}')">ì‚­ì œ</button>`)
  ).join('');
}

function renderSlots() {
  const el = document.getElementById('slots-grid');
  el.innerHTML = equippedSlots.map((card, i) => {
    if (!card) {
      return `
        <div class="slot" onclick="openModal(${i})">
          <div class="slot-number">SLOT ${i+1}</div>
          <div class="slot-empty-icon">â¬œ</div>
          <div class="slot-empty-text">í´ë¦­í•˜ì—¬ ì¥ì°©</div>
        </div>`;
    }
    const statLines = Object.entries(card.stats).filter(([,v]) => v > 0)
      .map(([k,v]) => `+${v}${STAT_UNIT[k]} ${STAT_LABELS[k]}`).join('\n');

    return `
      <div class="slot filled" data-grade="${card.grade}">
        <div class="slot-number">SLOT ${i+1}</div>
        <div class="slot-remove" onclick="unequipSlot(${i})">âœ•</div>
        <div class="slot-card-icon">${card.icon}</div>
        <div class="slot-card-name">${card.name}</div>
        <div class="slot-card-grade" style="color:${getGradeColor(card.grade)}">${card.grade} Â· ${card.type}</div>
        <div class="slot-card-stats">${Object.entries(card.stats).filter(([,v])=>v>0).map(([k,v])=>`+${v}${STAT_UNIT[k]} ${STAT_LABELS[k]}`).join('<br>')}</div>
      </div>`;
  }).join('');
}

function getGradeColor(g) {
  return { N:'#718096', R:'#60a5fa', SR:'#a78bfa', SSR:'#d4a843' }[g] || '#fff';
}

function renderEffectSummary() {
  const el = document.getElementById('effect-summary');
  const equipped = equippedSlots.filter(Boolean);

  if (!equipped.length) {
    el.innerHTML = `<div class="empty-state" style="padding:20px;"><div class="empty-state-icon">ğŸ“Š</div>ì¹´ë“œë¥¼ ì¥ì°©í•˜ë©´ íš¨ê³¼ê°€ í‘œì‹œë©ë‹ˆë‹¤</div>`;
    return;
  }

  // ê°œë³„ íš¨ê³¼ í•©ì‚°
  const totalStats = { hp: 0, atk: 0, def: 0, spd: 0, crit: 0, crit_dmg: 0 };
  equipped.forEach(c => Object.keys(totalStats).forEach(k => totalStats[k] += (c.stats[k] || 0)));

  // ì„¸íŠ¸ íš¨ê³¼ ê³„ì‚°
  const setResult = calcSetEffects(equipped);

  let html = `<div class="set-effect-area">
    <div class="set-effect-title">ì ìš© ì¤‘ì¸ íš¨ê³¼</div>`;

  // ê°œë³„íš¨ê³¼
  html += `<div class="effect-row individual">
    <span class="effect-badge individual">ê°œë³„</span>
    <div class="effect-content">
      <div class="effect-label">5ì¥ ê°œë³„ ìŠ¤íƒ¯</div>
      <div class="effect-stats">
        ${Object.entries(totalStats).filter(([,v])=>v>0).map(([k,v])=>`<span class="effect-stat-chip positive">+${v}${STAT_UNIT[k]} ${STAT_LABELS[k]}</span>`).join('')}
      </div>
    </div>
  </div>`;

  // ì„¸íŠ¸íš¨ê³¼
  if (setResult.type !== 'none') {
    const typeMap = {
      pair: {label:'í˜ì–´', cls:'pair', rowCls:'set-pair'},
      twopair: {label:'íˆ¬ í˜ì–´', cls:'twopair', rowCls:'set-twopair'},
      triple: {label:'íŠ¸ë¦¬í”Œ', cls:'triple', rowCls:'set-triple'},
      fullhouse: {label:'í’€ í•˜ìš°ìŠ¤', cls:'fullhouse', rowCls:'set-fullhouse'},
      straight: {label:'ìŠ¤íŠ¸ë ˆì´íŠ¸', cls:'straight', rowCls:'set-straight'},
    };

    setResult.effects.forEach(eff => {
      const t = typeMap[eff.setType] || {};
      html += `<div class="effect-row ${t.rowCls||''}">
        <span class="effect-badge ${t.cls||''}">${t.label||''}</span>
        <div class="effect-content">
          <div class="effect-label">${eff.cardTypes.join(' + ')} ${t.label}</div>
          <div class="effect-desc">${eff.desc}</div>
        </div>
      </div>`;
    });
  } else {
    html += `<div style="font-size:11px;color:var(--text-muted);padding:8px 4px;">ì„¸íŠ¸ íš¨ê³¼ ì—†ìŒ</div>`;
  }

  html += `</div>`;

  // í•©ì‚° ìŠ¤íƒ¯
  html += `<div class="total-stats">
    <div class="total-stats-title">ì´ í•©ì‚° ìŠ¤íƒ¯</div>
    <div class="total-stats-grid">
      <div class="total-stat-item"><div class="total-stat-name">HP</div><div class="total-stat-val hp">+${totalStats.hp}</div></div>
      <div class="total-stat-item"><div class="total-stat-name">ê³µê²©</div><div class="total-stat-val atk">+${totalStats.atk}</div></div>
      <div class="total-stat-item"><div class="total-stat-name">ë°©ì–´</div><div class="total-stat-val def">+${totalStats.def}</div></div>
      <div class="total-stat-item"><div class="total-stat-name">ì†ë„</div><div class="total-stat-val spd">+${totalStats.spd}</div></div>
      <div class="total-stat-item"><div class="total-stat-name">ì¹˜ëª…ë¥ </div><div class="total-stat-val crit">+${totalStats.crit}%</div></div>
      <div class="total-stat-item"><div class="total-stat-name">ì¹˜ëª…í”¼í•´</div><div class="total-stat-val crit_dmg">+${totalStats.crit_dmg}%</div></div>
    </div>
  </div>`;

  // ì„¸íŠ¸ íƒ€ì… í‘œì‹œ
  const setTypeNames = { none:'ì¡±ë³´ ì—†ìŒ', pair:'í˜ì–´', twopair:'íˆ¬ í˜ì–´', triple:'íŠ¸ë¦¬í”Œ', fullhouse:'í’€ í•˜ìš°ìŠ¤', straight:'ìŠ¤íŠ¸ë ˆì´íŠ¸' };
  const setTypeColors = { none:'var(--text-muted)', pair:'var(--pair-color)', twopair:'var(--twopair-color)', triple:'var(--triple-color)', fullhouse:'var(--fullhouse-color)', straight:'var(--straight-color)' };
  html += `<div style="margin-top:10px;text-align:center;font-size:11px;font-weight:700;letter-spacing:2px;color:${setTypeColors[setResult.type]||'var(--text-muted)'}">
    ğŸƒ ${setTypeNames[setResult.type]||'ì¡±ë³´ ì—†ìŒ'}
  </div>`;

  el.innerHTML = html;
}

function calcSetEffects(equipped) {
  if (equipped.length < 2) return { type: 'none', effects: [] };

  // ì¢…ë¥˜ë³„ ì¹´ìš´íŠ¸
  const typeCount = {};
  equipped.forEach(c => typeCount[c.type] = (typeCount[c.type] || 0) + 1);

  const counts = Object.values(typeCount).sort((a,b) => b-a);
  const types = Object.keys(typeCount);

  const effects = [];

  // ìŠ¤íŠ¸ë ˆì´íŠ¸: 5ì¥ ê°™ì€ ì¢…ë¥˜
  if (counts[0] === 5) {
    const card = equipped.find(c => c.type === types.find(t => typeCount[t] === 5));
    effects.push({ setType: 'straight', cardTypes: [card.type], desc: card.setEffects.straight || 'ìŠ¤íŠ¸ë ˆì´íŠ¸ íš¨ê³¼ ì—†ìŒ' });
    return { type: 'straight', effects };
  }

  // í’€í•˜ìš°ìŠ¤: 3+2
  if (counts[0] === 3 && counts[1] === 2) {
    const tripleType = types.find(t => typeCount[t] === 3);
    const pairType = types.find(t => typeCount[t] === 2);
    const tripleCard = equipped.find(c => c.type === tripleType);
    const pairCard = equipped.find(c => c.type === pairType);
    effects.push({ setType: 'triple', cardTypes: [tripleType], desc: tripleCard.setEffects.triple || 'íŠ¸ë¦¬í”Œ íš¨ê³¼ ì—†ìŒ' });
    effects.push({ setType: 'pair', cardTypes: [pairType], desc: pairCard.setEffects.pair || 'í˜ì–´ íš¨ê³¼ ì—†ìŒ' });
    return { type: 'fullhouse', effects };
  }

  // íŠ¸ë¦¬í”Œ
  if (counts[0] === 3) {
    const tripleType = types.find(t => typeCount[t] === 3);
    const tripleCard = equipped.find(c => c.type === tripleType);
    effects.push({ setType: 'triple', cardTypes: [tripleType], desc: tripleCard.setEffects.triple || 'íŠ¸ë¦¬í”Œ íš¨ê³¼ ì—†ìŒ' });
    return { type: 'triple', effects };
  }

  // íˆ¬ í˜ì–´: 2+2
  if (counts[0] >= 2 && counts[1] >= 2) {
    const pairTypes = types.filter(t => typeCount[t] >= 2);
    pairTypes.forEach(pt => {
      const pairCard = equipped.find(c => c.type === pt);
      effects.push({ setType: 'pair', cardTypes: [pt], desc: pairCard.setEffects.pair || 'í˜ì–´ íš¨ê³¼ ì—†ìŒ' });
    });
    return { type: 'twopair', effects };
  }

  // í˜ì–´
  if (counts[0] >= 2) {
    const pairType = types.find(t => typeCount[t] >= 2);
    const pairCard = equipped.find(c => c.type === pairType);
    effects.push({ setType: 'pair', cardTypes: [pairType], desc: pairCard.setEffects.pair || 'í˜ì–´ íš¨ê³¼ ì—†ìŒ' });
    return { type: 'pair', effects };
  }

  return { type: 'none', effects: [] };
}

// ================================
// ê°€ëŠ¥í•œ ì„¸íŠ¸ ì¡°í•©
// ================================
function renderAllSets() {
  const el = document.getElementById('all-sets-list');

  if (cards.length < 5) {
    el.innerHTML = `<div class="empty-state"><div class="empty-state-icon">ğŸƒ</div>ì¹´ë“œë¥¼ 5ì¥ ì´ìƒ ìƒì„±í•˜ë©´ ê°€ëŠ¥í•œ ì„¸íŠ¸ ì¡°í•©ì´ í‘œì‹œë©ë‹ˆë‹¤<br><small style="color:var(--text-muted);">(í˜„ì¬ ${cards.length}ì¥)</small></div>`;
    return;
  }

  // 5ì¥ì§œë¦¬ ì¡°í•© ìƒì„± (ì¤‘ë³µ ì¢…ë¥˜ ì œì™¸)
  const combos = getCombinations(cards, 5).filter(combo => {
    const types = combo.map(c => c.type);
    return new Set(types).size === types.length; // ë™ì¼ ì¢…ë¥˜ ì¤‘ë³µ ë¶ˆê°€
  });

  if (!combos.length) {
    el.innerHTML = `<div class="empty-state"><div class="empty-state-icon">ğŸƒ</div>ì¥ì°© ê°€ëŠ¥í•œ 5ì¥ ì¡°í•©ì´ ì—†ìŠµë‹ˆë‹¤<br><small style="color:var(--text-muted);">(ë™ì¼ ì¢…ë¥˜ ì¹´ë“œëŠ” ì¤‘ë³µ ì¥ì°© ë¶ˆê°€)</small></div>`;
    return;
  }

  // ì ìˆ˜ ê³„ì‚° ë° ì •ë ¬
  const scored = combos.map(combo => {
    const setResult = calcSetEffects(combo);
    const totalStats = { hp:0, atk:0, def:0, spd:0, crit:0, crit_dmg:0 };
    combo.forEach(c => Object.keys(totalStats).forEach(k => totalStats[k] += (c.stats[k]||0)));
    const score = totalStats.hp * 0.5 + totalStats.atk * 2 + totalStats.def * 1.5 + totalStats.spd * 10 + totalStats.crit * 15 + totalStats.crit_dmg * 8
      + (setResult.type === 'straight' ? 1000 : setResult.type === 'fullhouse' ? 700 : setResult.type === 'triple' ? 500 : setResult.type === 'twopair' ? 400 : setResult.type === 'pair' ? 200 : 0);

    return { combo, setResult, totalStats, score };
  });

  scored.sort((a,b) => b.score - a.score);

  const typeLabels = { none:'ì¡±ë³´ ì—†ìŒ', pair:'í˜ì–´', twopair:'íˆ¬ í˜ì–´', triple:'íŠ¸ë¦¬í”Œ', fullhouse:'í’€ í•˜ìš°ìŠ¤', straight:'ìŠ¤íŠ¸ë ˆì´íŠ¸' };
  const typeColors = { none:'var(--text-muted)', pair:'var(--pair-color)', twopair:'var(--twopair-color)', triple:'var(--triple-color)', fullhouse:'var(--fullhouse-color)', straight:'var(--straight-color)' };

  const top20 = scored.slice(0, 20);

  el.innerHTML = top20.map((item, idx) => {
    const setLabel = typeLabels[item.setResult.type] || 'ì¡±ë³´ ì—†ìŒ';
    const setColor = typeColors[item.setResult.type];
    const cardIds = item.combo.map(c=>c.id).join(',');

    const effectsHtml = item.setResult.effects.map(eff =>
      `<span class="set-effect-chip" style="background:rgba(255,255,255,0.04);border:1px solid var(--border);color:${setColor};">${eff.desc}</span>`
    ).join('');

    const statSummary = Object.entries(item.totalStats).filter(([,v])=>v>0).map(([k,v])=>`+${v}${STAT_UNIT[k]} ${STAT_LABELS[k]}`).join(' Â· ');

    return `
      <div class="set-card set-type-${item.setResult.type} animate-in" style="animation-delay:${idx*0.03}s">
        <div class="set-header">
          <span class="set-rank" style="color:${idx===0?'var(--gold)':idx<=2?'var(--silver)':'var(--text-muted)'}">#${idx+1}</span>
          <span class="effect-badge ${item.setResult.type === 'none' ? 'individual' : item.setResult.type}" style="">${setLabel}</span>
          <span class="set-score">ì ìˆ˜: ${Math.round(item.score)}</span>
        </div>
        <div class="set-cards-preview">
          ${item.combo.map(c=>`
            <div class="set-card-chip">
              <span class="chip-icon">${c.icon}</span>
              <span style="color:${getGradeColor(c.grade)}">${c.name}</span>
            </div>
          `).join('')}
        </div>
        <div style="font-size:10px;color:var(--text-secondary);margin-bottom:8px;">${statSummary}</div>
        ${effectsHtml ? `<div class="set-effects-preview">${effectsHtml}</div>` : ''}
        <button class="set-apply-btn" onclick="applySetToSlots('${cardIds}')">ìŠ¬ë¡¯ì— ì ìš©</button>
      </div>
    `;
  }).join('') + (scored.length > 20 ? `<div style="text-align:center;padding:16px;font-size:11px;color:var(--text-muted);">... ì™¸ ${scored.length-20}ê°œ ì¡°í•©</div>` : '');
}

function getCombinations(arr, k) {
  if (k === 1) return arr.map(x => [x]);
  const result = [];
  for (let i = 0; i <= arr.length - k; i++) {
    const rest = getCombinations(arr.slice(i+1), k-1);
    rest.forEach(combo => result.push([arr[i], ...combo]));
  }
  return result;
}

function applySetToSlots(cardIds) {
  const ids = cardIds.split(',');
  const combo = ids.map(id => cards.find(c => c.id === id)).filter(Boolean);
  if (combo.length !== 5) return showToast('ì¡°í•© ì ìš© ì˜¤ë¥˜', 'error');
  equippedSlots = combo.slice(0, 5);
  renderAll();
  switchTab('equip');
  showToast('ì„¸íŠ¸ê°€ ìŠ¬ë¡¯ì— ì ìš©ë˜ì—ˆìŠµë‹ˆë‹¤!', 'success');
}

// ================================
// ì¹´ë“œ CRUD
// ================================
function createCard() {
  const name = document.getElementById('card-name').value.trim();
  const type = document.getElementById('card-type').value.trim().toLowerCase();

  if (!name) return showToast('ëª¬ìŠ¤í„° ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”', 'error');
  if (!type) return showToast('ëª¬ìŠ¤í„° ì¢…ë¥˜ë¥¼ ì…ë ¥í•˜ì„¸ìš”', 'error');

  const stats = {
    hp: parseInt(document.getElementById('stat-hp').value) || 0,
    atk: parseInt(document.getElementById('stat-atk').value) || 0,
    def: parseInt(document.getElementById('stat-def').value) || 0,
    spd: parseInt(document.getElementById('stat-spd').value) || 0,
    crit: parseInt(document.getElementById('stat-crit').value) || 0,
    crit_dmg: parseInt(document.getElementById('stat-crit_dmg').value) || 0,
  };

  const hasStats = Object.values(stats).some(v => v > 0);
  if (!hasStats) return showToast('ìµœì†Œ 1ê°œì˜ ìŠ¤íƒ¯ì„ ì…ë ¥í•˜ì„¸ìš”', 'error');

  const card = {
    id: uid(),
    name,
    type,
    icon: selectedIcon,
    grade: selectedGrade,
    stats,
    setEffects: {
      pair: document.getElementById('set-pair').value.trim() || `${type} í˜ì–´ íš¨ê³¼`,
      triple: document.getElementById('set-triple').value.trim() || `${type} íŠ¸ë¦¬í”Œ íš¨ê³¼`,
      straight: document.getElementById('set-straight').value.trim() || `${type} ìŠ¤íŠ¸ë ˆì´íŠ¸ íš¨ê³¼`,
    }
  };

  cards.push(card);
  renderAll();
  clearForm();
  showToast(`"${name}" ì¹´ë“œê°€ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤!`, 'success');
}

function clearForm() {
  ['card-name','card-type','stat-hp','stat-atk','stat-def','stat-spd','stat-crit','stat-crit_dmg','set-pair','set-triple','set-straight']
    .forEach(id => { document.getElementById(id).value = ''; });
}

function deleteCard(id) {
  cards = cards.filter(c => c.id !== id);
  equippedSlots = equippedSlots.map(c => c && c.id === id ? null : c);
  renderAll();
  showToast('ì¹´ë“œê°€ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤', '');
}

function clearAll() {
  if (!confirm('ëª¨ë“  ì¹´ë“œë¥¼ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) return;
  cards = [];
  equippedSlots = [null,null,null,null,null];
  renderAll();
}

// ================================
// ìŠ¬ë¡¯ ì¥ì°©/í•´ì œ
// ================================
function quickEquip(cardId) {
  const card = cards.find(c => c.id === cardId);
  if (!card) return;

  // ì´ë¯¸ ê°™ì€ ì¢…ë¥˜ ì¥ì°© ì—¬ë¶€
  const alreadyType = equippedSlots.some(s => s && s.type === card.type && s.id !== cardId);
  if (alreadyType) return showToast(`ë™ì¼ ì¢…ë¥˜(${card.type}) ì¹´ë“œê°€ ì´ë¯¸ ì¥ì°©ë˜ì–´ ìˆìŠµë‹ˆë‹¤`, 'error');

  // ì´ë¯¸ ì¥ì°© ì—¬ë¶€
  const alreadyEquipped = equippedSlots.some(s => s && s.id === cardId);
  if (alreadyEquipped) return showToast('ì´ë¯¸ ì¥ì°©ëœ ì¹´ë“œì…ë‹ˆë‹¤', 'error');

  // ë¹ˆ ìŠ¬ë¡¯ì— ì¥ì°©
  const emptySlot = equippedSlots.indexOf(null);
  if (emptySlot === -1) return showToast('ì¥ì°© ìŠ¬ë¡¯ì´ ê°€ë“ ì°¼ìŠµë‹ˆë‹¤', 'error');

  equippedSlots[emptySlot] = card;
  renderAll();
  showToast(`ìŠ¬ë¡¯ ${emptySlot+1}ì— "${card.name}" ì¥ì°©!`, 'success');
}

function openModal(slotIdx) {
  activeModalSlot = slotIdx;
  const el = document.getElementById('modal-card-list');

  const equippedTypes = equippedSlots
    .filter((c,i) => c && i !== slotIdx)
    .map(c => c.type);

  const equippedIds = equippedSlots
    .filter((c,i) => c && i !== slotIdx)
    .map(c => c.id);

  const available = cards.filter(c => !equippedTypes.includes(c.type) && !equippedIds.includes(c.id));

  if (!available.length) {
    el.innerHTML = `<div class="empty-state"><div class="empty-state-icon">ğŸ´</div>ì¥ì°© ê°€ëŠ¥í•œ ì¹´ë“œê°€ ì—†ìŠµë‹ˆë‹¤</div>`;
  } else {
    el.innerHTML = available.map(card =>
      renderCardItem(card, `<button class="btn-sm" onclick="equipToSlot('${card.id}')">ì„ íƒ</button>`)
    ).join('');
  }

  document.getElementById('card-modal').classList.add('open');
}

function closeModal() {
  document.getElementById('card-modal').classList.remove('open');
  activeModalSlot = null;
}

function equipToSlot(cardId) {
  if (activeModalSlot === null) return;
  const card = cards.find(c => c.id === cardId);
  if (!card) return;
  equippedSlots[activeModalSlot] = card;
  closeModal();
  renderAll();
  showToast(`ìŠ¬ë¡¯ ${activeModalSlot+1}ì— "${card.name}" ì¥ì°©!`, 'success');
}

function unequipSlot(slotIdx) {
  const card = equippedSlots[slotIdx];
  equippedSlots[slotIdx] = null;
  renderAll();
  if (card) showToast(`"${card.name}" í•´ì œ`, '');
}

// ================================
// íƒ­ ì „í™˜
// ================================
function switchTab(tab) {
  document.querySelectorAll('.tab-content').forEach(el => el.style.display = 'none');
  document.querySelectorAll('.tab-btn').forEach(el => el.classList.remove('active'));

  document.getElementById('tab-' + tab).style.display = 'block';
  document.querySelectorAll('.tab-btn')[['equip','create','sets'].indexOf(tab)].classList.add('active');

  if (tab === 'sets') renderAllSets();
}

// ================================
// í† ìŠ¤íŠ¸
// ================================
let toastTimer;
function showToast(msg, type = '') {
  const el = document.getElementById('toast');
  el.textContent = msg;
  el.className = 'show' + (type ? ' ' + type : '');
  clearTimeout(toastTimer);
  toastTimer = setTimeout(() => el.className = '', 2500);
}

// í´ë¦­ ë°– ëª¨ë‹¬ ë‹«ê¸°
document.getElementById('card-modal').addEventListener('click', function(e) {
  if (e.target === this) closeModal();
});

init();
</script>


</body></html>